const songs = [
     {
        title: "Riva Riva Rivala",
        src: "riva.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },

    {
        title: "Come to the party",
        src: "cttp.mp3",
        albumArt: "cttp.jpg",
        artist: "Vijay Prakash",
        tags: ["Allu Arjun", "s/o satyamurthy", "Party"]
    },
    {
        title: "Nuuva samaastham",
        src: "ns.mp3",
        albumArt: "ns.webp",
        artist: "Yazin Nizar",
        tags: ["Maharishi", "Mahesh babu", "Motivation"]
    },
    {
        title: "Aadu Macha ",
        src: "1.mp3",
        albumArt: "eagle.jpg",
        artist: "Rahul Sipligunj",
        tags: ["Eagle", "Ravi teja", "telugu" , "add"]
    },
{
        title: "Aaradugula Bullet",
        src: "2.mp3",
        albumArt: "atha.jpg",
        artist: "Vijay Prakash",
        tags: ["Pspk", "Pawan kalyan", "old songs", "telugu" , "Atharintiki dharadhi"]
    },
{
        title: "Jabilli nuvve cheppamma",
        src: "jnc.mp3",
        albumArt: "jnc.jpg",
        artist: "NTR",
        tags: ["NTR", "Ramayya", "love" , "couples","telugu"]
    },
{
        title: "Aakundi Okachota",
        src: "4.mp3",
        albumArt: "chiru.jpg",
        artist: "Chiru",
        tags: ["chiranjeevi", "telugu", "chiru" , "comedy"]
    },
{
        title: "Ayalaa Ayalaa",
        src: "5.mp3",
        albumArt: "ayalan.webp",
        artist: "Aa",
        tags: ["siva karthikeya", "telugu", "latest songs"]
    },
{
        title: "Bloody Sweet",
        src: "6.mp3",
        albumArt: "leo.jpg",
        artist: "Dj",
        tags: ["Leo", "Vijay", "telugu" , "mass"]
    },
{
        title: "Pspk song ",
        src: "7.mp3",
        albumArt: "pspk.webp",
        artist: "Fan",
        tags: ["Pspk", "songs", "telugu" , "pawan kalyan"]
    },
{
        title: "Pushpa Pushpa",
        src: "8.mp3",
        albumArt: "pushpa.jpg",
        artist: "AA",
        tags: ["Allu Arjun", "Pushpa", "Dance" , "telugu dj mix"]
    },
{
        title: "Maharishi ",
        src: "9.mp3",
        albumArt: "ns.webp",
        artist: "MB",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: " Boss Party",
        src: "10.mp3",
        albumArt: "waltier.jpg",
        artist: "Chiru",
        tags: ["chiru", "waltier", "chiranjeevi" , "telugu"]
    },
{
        title: "Daakko Daakko Meka",
        src: "11.mp3",
        albumArt: "waltier.jpg",
        artist: "psuhpa",
        tags: ["Pushpa", "Allu arjun", "telugu"]
    },
{
        title: "Heart Attack",
        src: "12.mp3",
        albumArt: "hat.jpg",
        artist: "HT",
        tags: ["", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Hi nanna ",
        src: "13.mp3",
        albumArt: "hinanna.jpg",
        artist: "hi",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Vilion song ",
        src: "14.mp3",
        albumArt: "iddaru.webp",
        artist: "AA",
        tags: ["", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Vennello Vinnanu",
        src: "15.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "O Rendu Prema Meghaalila",
        src: "16.mp3",
        albumArt: "baby.jpg",
        artist: "B",
        tags: ["Baby", "O rendu", "telugu" , "mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "17.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "18.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "19.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "20.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "21.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "22.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "23.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "24.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "25.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "26.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "27.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "28.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "29.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "30.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "31.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "32.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "33.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "34.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "35.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "36.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "37.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "38.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "39.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "40.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "41.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "42.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "43.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "44.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "45.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "46.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "47.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "48.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
{
        title: "Riva Riva Rivala ",
        src: "49.mp3",
        albumArt: "riva.jpg",
        artist: "Dj",
        tags: ["Dj mix", "party", "Dance" , "telugu dj mix"]
    },
    {
        title: "Song 3",
        src: "50.mp3",
        albumArt: "songs/album3.jpg",
        artist: "Artist 3",
        tags: ["jazz", "2019"]
    }
];

document.addEventListener('DOMContentLoaded', () => {
    const searchInput = document.getElementById('search');
    const homeMain = document.getElementById('home');
    
    if (searchInput) {
        searchInput.addEventListener('input', () => {
            const query = searchInput.value.toLowerCase();
            updateHome(query);
        });
        updateHome();
    } else {
        const audio = document.getElementById('audio');
        const playerArt = document.getElementById('player-art');
        const playerTitle = document.getElementById('player-title');
        const timer = document.getElementById('timer');
        const prevButton = document.getElementById('prev');
        const nextButton = document.getElementById('next');

        const urlParams = new URLSearchParams(window.location.search);
        let songIndex = parseInt(urlParams.get('song'));
        
        function loadSong(index) {
            const song = songs[index];
            if (song) {
                audio.src = song.src;
                playerArt.src = song.albumArt;
                playerTitle.textContent = `${song.title} - ${song.artist}`;
                audio.play();
                
                audio.addEventListener('timeupdate', () => {
                    const currentTime = Math.floor(audio.currentTime);
                    const duration = Math.floor(audio.duration);
                    timer.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
                });
            }
        }
        
        loadSong(songIndex);

        prevButton.addEventListener('click', () => {
            if (songIndex > 0) {
                songIndex--;
                loadSong(songIndex);
            }
        });

        nextButton.addEventListener('click', () => {
            if (songIndex < songs.length - 1) {
                songIndex++;
                loadSong(songIndex);
            }
        });
    }
});

function updateHome(query = '') {
    const homeMain = document.getElementById('home');
    homeMain.innerHTML = '';
    
    const filteredSongs = songs.filter(song => 
        song.title.toLowerCase().includes(query) || 
        song.artist.toLowerCase().includes(query) ||
        song.tags.some(tag => tag.toLowerCase().includes(query))
    );
    
    filteredSongs.forEach((song, index) => {
        const songItem = document.createElement('div');
        songItem.className = 'song-item';
        songItem.innerHTML = `
            <img src="${song.albumArt}" alt="${song.title}" data-index="${index}">
            <p>${song.title} - ${song.artist}</p>
        `;
        songItem.querySelector('img').addEventListener('click', () => {
            window.location.href = `player.html?song=${index}`;
        });
        homeMain.appendChild(songItem);
    });
}

function formatTime(seconds) {
    const minutes = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
}
